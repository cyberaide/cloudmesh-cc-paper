\section{MNIST Workflow}\label{mnist-workflow}

For this example we use UVA's Rivanna machine. Please adopt it to your
HPC machine.

We can test Rivanna's GPUs and benchmark their runtimes for running
several MNIST Python programs. These programs include machine learning
processing, convolutional neural network, long short-term memory,
recurrent neural network, and others. The programs can be found at
\url{https://github.com/cybertraining-dsc/reu2022/tree/main/code/deeplearning/mnist}

To run the MNIST remote workflow on Rivanna, first ensure that your UVA
computing ID is set with the following command:

\begin{verbatim}
cms set username=XXXXXX
\end{verbatim}

where the X's are substituted with your computing ID.

Then, issue commands:

\begin{verbatim}
cd ~/cm/cloudmesh-cc
pytest -v -x --capture=no examples/example_run_mnist_workflow_exec.py
\end{verbatim}

This program uses SLURM and a shell script to iterate through the
available GPUs on Rivanna, which are V100, A100, K80, P100, and RTX2080.

On a successful run, the output will be similar to the following:

\begin{verbatim}
+---------+----------+---------+---------+---------------------+
| Name    | Status   |    Time |     Sum | Start               |
|---------+----------+---------+---------+---------------------+
| v100    | ok       | 138.087 | 138.087 | 2022-09-29 18:15:45 |
| a100    | ok       | 106.046 | 106.046 | 2022-09-29 18:18:05 |
| k80     | ok       | 171.057 | 171.057 | 2022-09-29 18:19:52 |
| p100    | ok       | 202.055 | 202.055 | 2022-09-29 18:22:44 |
| rtx2080 | ok       | 138.048 | 138.048 | 2022-09-29 18:26:07 |
+---------+----------+---------+---------+---------------------+
\end{verbatim}
